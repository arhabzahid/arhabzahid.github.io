<!DOCTYPE html>
<html>
<head>
  <title>Newspaper Titles</title>
</head>
<body>
  <h1>Newspaper Titles</h1>
  <ul id="titles-list"></ul>

  <script>
    const url = 'https://corsproxy.io/?https://chroniclingamerica.loc.gov/newspapers/feed/';

    fetch(url)
      .then(response => response.text())
      .then(str => {
        const parser = new DOMParser();
        const xml = parser.parseFromString(str, 'application/xml');

        // Use namespace-aware querySelectorAll
        const titles = Array.from(xml.querySelectorAll('item title'));
        const links = Array.from(xml.querySelectorAll('item link'));
        const list = document.getElementById('titles-list');

        if (titles.length === 0 || links.length === 0) {
          list.innerHTML = '<li>No newspaper titles found.</li>';
        } else {
          for (let i = 0; i < titles.length; i++) {
            const li = document.createElement('li');
            const a = document.createElement('a');
            a.href = links[i].textContent;
            a.textContent = titles[i].textContent;
            a.target = '_blank';
            li.appendChild(a);
            list.appendChild(li);
          }
        }
      })
      .catch(error => {
        console.error('Error fetching data:', error);
        document.getElementById('titles-list').innerHTML = '<li>Failed to load titles.</li>';
      });
  </script>
</body>
</html>
